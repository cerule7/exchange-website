<script src="https://unpkg.com/jquery"></script>
<script src="https://surveyjs.azureedge.net/1.0.63/survey.jquery.min.js"></script>

{% extends 'layouts/main.html' %}
{% block title %}Register{% endblock %}
{% block content %}

<div class="page-header">
  <h1>Sign Up</h1>
</div>

<div id="surveyContainer">
  <script>
	Survey.Survey.cssType = "bootstrap";

	var surveyValueChanged = function (sender, options) {
	    var el = document.getElementById(options.name);
	    if (el) {
	        el.value = options.value;
	    }
	};

	//this is ugly but autogenerated 
	var surveyJSON = {completedHtml:"Thank you for signing up for a language exchange! You will receive more information and a possible partner assignment soon.",pages:[{name:"page1",elements:[{type:"text",name:"name",title:"Full Name",isRequired:true},{type:"text",name:"email",title:"Email",isRequired:true,validators:[{type:"email"}]},{type:"text",name:"ruid",title:"RUID:",isRequired:true,validators:[{type:"numeric"}]},{type:"dropdown",name:"year",title:"Class Year",isRequired:true,choices:[{value:"2019",text:"2019"},{value:"2020",text:"2020"},{value:"2021",text:"2021"},{value:"2022",text:"2022"},{value:"2023",text:"2023"}]},{type:"dropdown",name:"sl1",title:"First choice language you'd like to share:",isRequired:true,choices:["American Sign Language", "Arabic","Armenian","Bengali","Cantonese","Croatian","Danish","Dutch","English","French","German","Greek","Gujarati","Hausa","Hebrew","Hindi","Icelandic","Italian","Japanese","Kannada","Korean","Malayalam","Manchu","Mandarin","Marathi","Norwegian","Odia","Persian","Polish","Portuguese","Punjabi","Russian","Sanskrit","Serbian","Spanish","Swahili","Swedish","Tagalog","Tamil","Telugu","Turkish","Twi","Ukrainian","Urdu","Vietnamese","Yiddish","Yoruba","Zulu"]},{type:"dropdown",name:"sp1",title:"Proficiency in first choice language:",isRequired:true,choices:[{value:"none",text:"None"},{value:"beginner",text:"Beginner"},{value:"intermediate",text:"Intermediate"},{value:"advanced",text:"Advanced"},{value:"fluent",text:"Fluent"}]},{type:"radiogroup",name:"sh1",title:"Are you a heritage speaker of this language?",isRequired:true,choices:[{value:"heritage",text:"Yes"},{value:"nonheritage",text:"No"}]},{type:"dropdown",name:"sl2",title:"Second choice language you'd like to share:",choices:["American Sign Language", "Arabic","Armenian","Bengali","Cantonese","Croatian","Danish","Dutch","English","French","German","Greek","Gujarati","Hausa","Hebrew","Hindi","Icelandic","Italian","Japanese","Kannada","Korean","Malayalam","Manchu","Mandarin","Marathi","Norwegian","Odia","Persian","Polish","Portuguese","Punjabi","Russian","Sanskrit","Serbian","Spanish","Swahili","Swedish","Tagalog","Tamil","Telugu","Turkish","Twi","Ukrainian","Urdu","Vietnamese","Yiddish","Yoruba","Zulu"]},{type:"dropdown",name:"sp2",visibleIf:"{sl2} notempty",title:"Proficiency in second choice language:",enableIf:"{sl2} notempty",isRequired:true,choices:[{value:"none",text:"None"},{value:"beginner",text:"Beginner"},{value:"intermediate",text:"Intermediate"},{value:"advanced",text:"Advanced"},{value:"fluent",text:"Fluent"}]},{type:"radiogroup",name:"sh2",visibleIf:"{sl2} notempty",title:"Are you a heritage speaker of this language?",enableIf:"{sl2} notempty",isRequired:true,choices:[{value:"heritage",text:"Yes"},{value:"nonheritage",text:"No"}]},{type:"dropdown",name:"sl3",visibleIf:"{sl2} notempty",title:"Third choice language you'd like to share:",enableIf:"{sl2} notempty",choices:["American Sign Language", "Arabic","Armenian","Bengali","Cantonese","Croatian","Danish","Dutch","English","French","German","Greek","Gujarati","Hausa","Hebrew","Hindi","Icelandic","Italian","Japanese","Kannada","Korean","Malayalam","Manchu","Mandarin","Marathi","Norwegian","Odia","Persian","Polish","Portuguese","Punjabi","Russian","Sanskrit","Serbian","Spanish","Swahili","Swedish","Tagalog","Tamil","Telugu","Turkish","Twi","Ukrainian","Urdu","Vietnamese","Yiddish","Yoruba","Zulu"]},{type:"dropdown",name:"sp3",visibleIf:"{sl3} notempty",title:"Proficiency in third choice language:",enableIf:"{sl3} notempty",isRequired:true,choices:[{value:"none",text:"None"},{value:"beginner",text:"Beginner"},{value:"intermediate",text:"Intermediate"},{value:"advanced",text:"Advanced"},{value:"fluent",text:"Fluent"}]},{type:"radiogroup",name:"sh3",visibleIf:"{sl3} notempty",title:"Are you a heritage speaker of this language?",enableIf:"{sl3} notempty",isRequired:true,choices:[{value:"heritage",text:"Yes"},{value:"nonheritage",text:"No"}]},{type:"dropdown",name:"ll1",title:"First choice language you'd like to learn:",isRequired:true,choices:["American Sign Language", "Arabic","Armenian","Bengali","Cantonese","Croatian","Danish","Dutch","English","French","German","Greek","Gujarati","Hausa","Hebrew","Hindi","Icelandic","Italian","Japanese","Kannada","Korean","Malayalam","Manchu","Mandarin","Marathi","Norwegian","Odia","Persian","Polish","Portuguese","Punjabi","Russian","Sanskrit","Serbian","Spanish","Swahili","Swedish","Tagalog","Tamil","Telugu","Turkish","Twi","Ukrainian","Urdu","Vietnamese","Yiddish","Yoruba","Zulu"]},{type:"dropdown",name:"lp1",title:"Proficiency in first choice language:",isRequired:true,choices:[{value:"none",text:"None"},{value:"beginner",text:"Beginner"},{value:"intermediate",text:"Intermediate"},{value:"advanced",text:"Advanced"},{value:"fluent",text:"Fluent"}]},{type:"radiogroup",name:"lh1",title:"Are you a heritage speaker of this language?",isRequired:true,choices:[{value:"heritage",text:"Yes"},{value:"nonheritage",text:"No"}]},{type:"dropdown",name:"ll2",title:"Second choice language you'd like to learn:",choices:["American Sign Language", "Arabic","Armenian","Bengali","Cantonese","Croatian","Danish","Dutch","English","French","German","Greek","Gujarati","Hausa","Hebrew","Hindi","Icelandic","Italian","Japanese","Kannada","Korean","Malayalam","Manchu","Mandarin","Marathi","Norwegian","Odia","Persian","Polish","Portuguese","Punjabi","Russian","Sanskrit","Serbian","Spanish","Swahili","Swedish","Tagalog","Tamil","Telugu","Turkish","Twi","Ukrainian","Urdu","Vietnamese","Yiddish","Yoruba","Zulu"]},{type:"dropdown",name:"lp2",visibleIf:"{ll2} notempty",title:"Proficiency in second choice language:",enableIf:"{ll2} notempty",isRequired:true,choices:[{value:"none",text:"None"},{value:"beginner",text:"Beginner"},{value:"intermediate",text:"Intermediate"},{value:"advanced",text:"Advanced"},{value:"fluent",text:"Fluent"}]},{type:"radiogroup",name:"lh2",visibleIf:"{ll2} notempty",title:"Are you a heritage speaker of this language?",enableIf:"{ll2} notempty",isRequired:true,choices:[{value:"heritage",text:"Yes"},{value:"nonheritage",text:"No"}]},{type:"dropdown",name:"ll3",visibleIf:"{ll2} notempty",title:"Third choice language you'd like to learn:",enableIf:"{ll2} notempty",choices:["American Sign Language", "Arabic","Armenian","Bengali","Cantonese","Croatian","Danish","Dutch","English","French","German","Greek","Gujarati","Hausa","Hebrew","Hindi","Icelandic","Italian","Japanese","Kannada","Korean","Malayalam","Manchu","Mandarin","Marathi","Norwegian","Odia","Persian","Polish","Portuguese","Punjabi","Russian","Sanskrit","Serbian","Spanish","Swahili","Swedish","Tagalog","Tamil","Telugu","Turkish","Twi","Ukrainian","Urdu","Vietnamese","Yiddish","Yoruba","Zulu"]},{type:"dropdown",name:"lp3",visibleIf:"{ll3} notempty",title:"Proficiency in third choice language:",enableIf:"{ll3} notempty",isRequired:true,choices:[{value:"none",text:"None"},{value:"beginner",text:"Beginner"},{value:"intermediate",text:"Intermediate"},{value:"advanced",text:"Advanced"},{value:"fluent",text:"Fluent"}]},{type:"radiogroup",name:"lh3",visibleIf:"{ll3} notempty",title:"Are you a heritage speaker of this language?",enableIf:"{ll3} notempty",isRequired:true,choices:[{value:"heritage",text:"Yes"},{value:"nonheritage",text:"No"}]},{type:"text",name:"majors",title:"Major(s):",isRequired:true},{type:"text",name:"minors",title:"Minor(s):",isRequired:true},{type:"comment",name:"why",title:"Why do you want to participate in a language exchange?",isRequired:true},{type:"comment",name:"hobbies",title:"Please list some of your hobbies and interests:",isRequired:true},{type:"comment",name:"courses",title:"Please list which language courses you are enrolled in, if any:",isRequired:false},{type:"radiogroup",name:"prevp",title:"Have you previously participated in a language exchange?",isRequired:true,choices:[{value:"previously_participated",text:"Yes"},{value:"did_not",text:"No"}]},{type:"text",name:"prevname",visibleIf:"{prevp} = \"previously_participated\"",title:"What was the name of your exchange partner?",enableIf:"{prevp} = \"previously_participated\"",isRequired:true},{type:"radiogroup",name:"wascomplete",visibleIf:"{prevp} = \"previously_participated\"",title:"Did you complete your language exchange?",enableIf:"{prevp} = \"previously_participated\"",isRequired:true,choices:[{value:"completed",text:"Yes"},{value:"uncompleted",text:"No"}]},{type:"comment",name:"uncomplete_exp",visibleIf:"{wascomplete} = \"uncompleted\"",title:"Why were you unable to complete the exchange?",enableIf:"{wascomplete} = \"uncompleted\"",isRequired:true},{type:"radiogroup",name:"unableprev",title:"Were you unable to get an exchange partner previously?",isRequired:true,choices:[{value:"unable",text:"Yes"},{value:"able",text:"No"}]}]}]}

	var survey = new Survey.Model(surveyJSON);
	$("#surveyContainer").Survey({
	    model: survey
	});

	survey.onComplete.add(function(result) {
	  console.log("result: " + JSON.stringify(result.data));
	  var xhr = new XMLHttpRequest();
	  xhr.open("POST", "https://rutgers-language-exchange.herokuapp.com/signup");
	  xhr.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');
	  // send the collected data as JSON
	  xhr.send(JSON.stringify(result.data));
	});

  </script>
</div>

{% endblock %}
