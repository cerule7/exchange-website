{% extends 'layouts/main.html' %}
{% block title %}Students{% endblock %}
{% block content %}

<head>
  <script src="https://unpkg.com/ag-grid-community/dist/ag-grid-community.min.noStyle.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/ag-grid-community/dist/styles/ag-grid.css">
  <link rel="stylesheet" href="https://unpkg.com/ag-grid-community/dist/styles/ag-theme-balham.css">
</head>

<div class="page-header">
  <h1>Students</h1>
</div>


<body>
  <div id="myGrid" style="height: 600px; width:100%;" class="ag-theme-balham"></div>

  <script type="text/javascript" charset="utf-8">
    // specify the columns
    var columnDefs = [
      {headerName: "Name", field: "name", sortable: true, filter: true},
      {headerName: "Class", field: "year", sortable: true, filter: true},
      {headerName: "Email", field: "email", sortable: true, filter: true},
      {headerName: "Sharing Languages", field: "share_langs", sortable: true, filter: true},
      {headerName: "Learning Languages", field: "learn_langs", sortable: true, filter: true},
      {headerName: "Previously Participated", field: "prev_p", sortable: true, filter: true},
    ];
    
    // specify the data
    var rowData = JSON.parse('{{rows|tojson}}');
    
    // let the grid know which columns and what data to use
    var gridOptions = {
    	defaultColDef: {
        resizable: true
      },
      columnDefs: columnDefs,
      rowData: rowData,
       onFirstDataRendered: autoSizeAll
    };

  // lookup the container we want the Grid to use
  var eGridDiv = document.querySelector('#myGrid');

  // create the grid passing in the div to use together with the columns & data we want to use
  new agGrid.Grid(eGridDiv, gridOptions);

	function autoSizeAll() {
	    var allColumnIds = [];
	    gridOptions.columnApi.getAllColumns().forEach(function(column) {
	        allColumnIds.push(column.colId);
	    });
	    gridOptions.columnApi.autoSizeColumns(allColumnIds);
	}

  </script>
</body>

{% endblock %}
